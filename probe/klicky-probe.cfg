#Simple way to include all the various klicky macros and configurations
# the current home for this configuration is https://github.com/jlas1/Klicky-Probe, please check it

#[include ./klicky-specific.cfg]
[include ./klicky-variables.cfg]
[include ./klicky-macros.cfg]
[include ./klicky-screws-tilt-calculate.cfg]
[include ./klicky-z-tilt-adjust.cfg]

#[include ./klicky-bed-mesh-calibrate.cfg]
#[include ./klicky-quad-gantry-level.cfg]

# Klicky Probe
[probe]
pin: ^sb2040:gpio28
x_offset: 0.0
y_offset: 19.75
z_offset: 5.70
speed: 5
lift_speed: 7
samples: 3
samples_result: median
sample_retract_dist: 2
samples_tolerance: 0.01
samples_tolerance_retries: 10

[servo klicky_servo]
#check were your servo is wired
pin: bed_board: gpio26
maximum_servo_angle: 180
minimum_pulse_width: 0.00025
maximum_pulse_width: 0.0024

[gcode_macro _servo_test_angle]
gcode:
	{% set ANGLE  = params.ANGLE|int %}
	
    SET_SERVO SERVO=klicky_servo ANGLE={ANGLE}
    G4 P250
    SET_SERVO SERVO=klicky_servo WIDTH=0.0
