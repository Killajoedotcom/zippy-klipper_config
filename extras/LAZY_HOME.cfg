[gcode_macro HOME_IF_NEEDED]
variable_output: 118
variable_led_status: True
variable_homing_status: 'STATUS_HOMING'
variable_ready_status: 'STATUS_READY'
gcode:
    {% if printer.toolhead.homed_axes != "xyz" %}
        {% if led_status == True %}
            {homing_status}
        {% endif %}
        {% if printer.toolhead.homed_axes == "" %}
                M{output} Homing all axes
                G28
        {% else %}
            {% if "x" not in printer.toolhead.homed_axes %}
                M{output} Homing X axis
                G28 X
            {% endif %}
            {% if "y" not in printer.toolhead.homed_axes %}
                M{output} Homing Y axis
                G28 Y
            {% endif %}
            {% if "z" not in printer.toolhead.homed_axes %}
                M{output} Homing Z axis
                G28 Z
            {% endif %}
        {% endif %}
        {% if led_status == True %}
            {ready_status}
        {% endif %}
    {% endif %}

[gcode_macro LAZY_HOME]
gcode:
    HOME_IF_NEEDED { rawparams }

[gcode_macro CHECK_HOME]
gcode:
    HOME_IF_NEEDED { rawparams }